<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">@media screen { h1,h2,h3,h4,h5,p,a,br,li,td, .underline {font-family:Arial, Helvetica, sans-serif;text-align:justify} body {font-size:11pt;line-height:1.3em} h1 {font-size:18pt} h2 {font-size:15pt} h3 {font-size:13pt} h4 {font-size:12pt} h5 {font-size:11pt} hr {text-align:center;height:1px;border:none;background:black} ol,ul,p,table {margin-left:3em;margin-right:3em} a {text-decoration:none} a:hover {text-decoration:underline} img {} .defword {width:25%} .defexplain {} .defexplain p {padding:0em;margin:0em} .deftablepara {} .deftable {width:85%;padding-left:1em;border-style:none;vertical-align:top} .deftable td {text-align:left;vertical-align:top} .deftablefaq {border-style:solid;border-width:thin} .stdtable {border:1px solid;background:black} .stdtable th {padding:0.5em;background:#EEEEEE;font-family:Arial, Helvetica, sans-serif;font-weight:bold;text-align:center} .stdtable td {padding:0.5em;background:white;text-align:left;vertical-align:top} .end {font-size:8pt} .example {margin-left:3em;margin-right:3em;border:1px solid;padding:1em;background-color:#EEEEEE} .header {margin-left:3em;margin-right:3em;border:1px solid;padding:1em;background-color:#FFFFEE} .indented {margin-left: 50px} .litable {text-align:left} .new {border-right:10px solid;padding-right:10px;font-family:Arial} .note {margin:0.5em 3em 0.5em 3em;border:1px solid;padding:0em;background-color:#F0F0A0} .note .title {font-family:sans-serif;font-weight:bold;margin:0.5em} .note .message {margin:0.5em 1.5em 0.5em 1.5em;padding:0em} .note .message p {padding:0em;margin:1em 0em 1em 0em} .reference {} .caption {font-size:10pt;text-align:center;font-style:italic} .todolist {padding:0.5em;font-size:10pt} .todolist p {margin:0em 3em 0em 3em} .todo {margin:1em 3em 1em 3em;padding:0.5em;border:solid 2px black;background:#FFAAAA;font-size:8pt} .todo p {margin:0.2em 1em 0.2em 1em} .inline {margin:0.5em 3em 0.5em 3em;border:solid 1px;padding:0em;background-color:#EEEEEE} .inline .title {font-family:sans-serif;font-weight:bold;margin:0.5em} .inline .elements {font-size:10pt;margin:0em 0em 0.5em 0em;padding:0em 1em 0em 1em} .inline .elements p {display:inline-table;margin:0.25em 0.5em 0.25em 0.5em} .tocindent {margin-left: 2em} .top {font-size:8pt;text-align:right} .underline {text-decoration:underline} } @media print { h1,h2,h3,h4,h5,p,a,br,li, #underline {font-family:Arial;text-align:justify;orphans:5;widows:5} p,li,td {font-size:10pt} ul,ol {page-break-after:avoid;orphans:5;widows:5} }</style><title>Resizing for R3 GUI framework</title></head><body onload="window.location.hash = window.location.hash"><a id="top" name="top"></a><h2>Resizing for R3 GUI framework</h2><pre class="example">Author: Ladislav Mecir, Richard Smolak
Date: 13-Jan-2013/15:50:55+1:00</pre><hr /><h2>Contents</h2><div class="tocindent"><a href="#sect1"><strong>1. Purpose</strong></a><br /><a href="#sect2"><strong>2. Overview</strong></a><br /><div class="tocindent"><a href="#sect2.1"><strong>2.1 Original version</strong></a><br /><a href="#sect2.2"><strong>2.2 Improvements</strong></a><br /><div class="tocindent"><a href="#sect2.2.1">2.2.1 Objects expand evenly</a><br /><div class="tocindent"><a href="#sect2.2.1.1">2.2.1.1 Even expansion example</a><br /></div><a href="#sect2.2.2">2.2.2 MIN-SIZE is used as the lowest boundary</a><br /><div class="tocindent"><a href="#sect2.2.2.1">2.2.2.1 0x0 used as &quot;no limit to shrink&quot;</a><br /></div><a href="#sect2.2.3">2.2.3 MAX-SIZE is used as the highest boundary</a><br /><div class="tocindent"><a href="#sect2.2.3.1">2.2.3.1 GUIE/MAX-PAIR used as &quot;no limit to expand&quot;</a><br /><a href="#sect2.2.3.2">2.2.3.2 Notes</a><br /></div><a href="#sect2.2.4">2.2.4 Hints are used to specify the dimensions of layouts</a><br /><a href="#sect2.2.5">2.2.5 Box model is used to specify margins, etc.</a><br /><a href="#sect2.2.6">2.2.6 Object visibility can be specified</a><br /></div></div><a href="#sect3"><strong>3. Hints</strong></a><br /><div class="tocindent"><a href="#sect3.1"><strong>3.1 INIT-HINT, MIN-HINT and MAX-HINT</strong></a><br /><a href="#sect3.2"><strong>3.2 The 'AUTO hint value</strong></a><br /><a href="#sect3.3"><strong>3.3 The 'INIT hint value</strong></a><br /><div class="tocindent"><a href="#sect3.3.1">3.3.1 Example of a non-resizing layout</a><br /></div><a href="#sect3.4"><strong>3.4 The 'KEEP hint value</strong></a><br /><a href="#sect3.5"><strong>3.5 Hint values can be specified for every coordinate</strong></a><br /></div><a href="#sect4"><strong>4. Styles and resizing</strong></a><br /><div class="tocindent"><a href="#sect4.1"><strong>4.1 Hpanel and vpanel</strong></a><br /><div class="tocindent"><a href="#sect4.1.1">4.1.1 LAYOUT-MODE</a><br /><a href="#sect4.1.2">4.1.2 Row and column resizing</a><br /><a href="#sect4.1.3">4.1.3 Hints</a><br /><a href="#sect4.1.4">4.1.4 The 'MAX hint value</a><br /><a href="#sect4.1.5">4.1.5 The 'MIN hint value</a><br /><a href="#sect4.1.6">4.1.6 The 'KEEP hint value</a><br /><a href="#sect4.1.7">4.1.7 A number used as a hint value</a><br /><a href="#sect4.1.8">4.1.8 A block used as a hint value</a><br /><a href="#sect4.1.9">4.1.9 Size</a><br /><a href="#sect4.1.10">4.1.10 Positions of graphic objects</a><br /><a href="#sect4.1.11">4.1.11 Position of the pane</a><br /></div><a href="#sect4.2"><strong>4.2 Hgroup and vgroup styles </strong></a><br /><div class="tocindent"><a href="#sect4.2.1">4.2.1 LAYOUT-MODE</a><br /><a href="#sect4.2.2">4.2.2 Longitudinal positions of graphic objects</a><br /><a href="#sect4.2.3">4.2.3 Transverzal positions of graphic objects</a><br /><a href="#sect4.2.4">4.2.4 Longitudinal positions of rows/columns</a><br /><a href="#sect4.2.5">4.2.5 Transversal positions of rows/columns</a><br /><a href="#sect4.2.6">4.2.6 Size</a><br /><a href="#sect4.2.7">4.2.7 Hints</a><br /></div></div><a href="#sect5"><strong>5. Box model</strong></a><br /><a href="#sect6"><strong>6. Additional GOB attributes</strong></a><br /><div class="tocindent"><a href="#sect6.1"><strong>6.1 Special atributes shared by layout(panel,group) faces</strong></a><br /><a href="#sect6.2"><strong>6.2 Special group face attributes</strong></a><br /><a href="#sect6.3"><strong>6.3 Special layout face attributes</strong></a><br /><a href="#sect6.4"><strong>6.4 Attribute formats and units</strong></a><br /><div class="tocindent"><a href="#sect6.4.1">6.4.1 LAYOUT-MODE</a><br /><a href="#sect6.4.2">6.4.2 ALIGN</a><br /><a href="#sect6.4.3">6.4.3 PANE-ALIGN</a><br /><a href="#sect6.4.4">6.4.4 VALIGN</a><br /><a href="#sect6.4.5">6.4.5 PANE-VALIGN</a><br /><a href="#sect6.4.6">6.4.6 SIZE, INIT-SIZE, MIN-SIZE, MAX-SIZE</a><br /><a href="#sect6.4.7">6.4.7 BREAK-AFTER</a><br /><a href="#sect6.4.8">6.4.8 BORDER-COLOR</a><br /><a href="#sect6.4.9">6.4.9 BORDER-SIZE, MARGIN, PADDING</a><br /><a href="#sect6.4.10">6.4.10 DRAW</a><br /><a href="#sect6.4.11">6.4.11 SPACE</a><br /></div></div><a href="#sect7"><strong>7. The UPDATE-FACE function</strong></a><br /></div><h2><a id="sect1" name="sect1">1. Purpose</a></h2><p>The purpose of this document is to describe the R3 GUI resizing subsystem.</p><div class="top">[ <a href="#top">back to top</a> ]</div><hr /><h2><a id="sect2" name="sect2">2. Overview</a></h2><h3><a id="sect2.1" name="sect2.1">2.1 Original version</a></h3><p>The original resizing in R3 GUI had the following bugs and limitations:</p><ul><li>problematic offset computation</li><li>the MAX-SIZE field influenced the expansion ratio</li><li>box model not implemented</li><li>low flexibility</li></ul><p>What was needed, was to define an algorithm that would:</p><ul><li>be flexible</li><li>use a built-in box model</li><li>easy to use by layout makers</li><li>easy to understand by style makers</li><li>simple consistent rules to compute positions</li><li>simple consistent rules to compute sizes</li></ul><h3><a id="sect2.2" name="sect2.2">2.2 Improvements</a></h3><h4><a id="sect2.2.1" name="sect2.2.1">2.2.1 Objects expand evenly</a></h4><p>Since the idea to use the MAX-SIZE field to determine the expansion ratio was not accepted well, we needed to use a different approach, looking more &quot;natural&quot; to the user.</p><p>The most natural expansion principle seemed to be the principle to expand objects &quot;evenly&quot;, i.e. proportionally to their original dimensions. The attribute used is called INIT-SIZE.</p><h5><a id="sect2.2.1.1" name="sect2.2.1.1">2.2.1.1 Even expansion example</a></h5><p>Let's consider two objects with no resizing limits, object A having INIT-SIZE 50x20, object B having INIT-SIZE 100x20. Moreover, let's suppose that the objects are in a hpanel consisting of just one row and containing no additional space.</p><p>Initially, both objects will have the dimensions 50x20 and 100x20, and the hpanel will have the dimensions 150x20. If it is needed to expand the hpanel to 300x20, the object A will be resized to 100x20, while the object B will be resized to 200x20, i.e. proportionally to their INIT-SIZE values.</p><h4><a id="sect2.2.2" name="sect2.2.2">2.2.2 MIN-SIZE is used as the lowest boundary</a></h4><p>For every object it is possible to specify the smallest dimensions the object is allowed to have after resizing. The attribute is called MIN-SIZE. When the size computed by the resizing algorithm would be smaller than the MIN-SIZE, the calculated size is clipped to the MIN-SIZE.</p><h5><a id="sect2.2.2.1" name="sect2.2.2.1">2.2.2.1 0x0 used as &quot;no limit to shrink&quot;</a></h5><p>If we do not want to limit the object's ability to shrink, we can set the MIN-SIZE of the object to 0x0. That does not limit the object's ability to shrink.</p><h4><a id="sect2.2.3" name="sect2.2.3">2.2.3 MAX-SIZE is used as the highest boundary</a></h4><p>For every object it is possible to specify the greatest dimensions the object is allowed to have after resizing. The attribute is called MAX-SIZE. When the size computed by the resizing algorithm would be greater than the MAX-SIZE, the calculated size is clipped to the MAX-SIZE.</p><h5><a id="sect2.2.3.1" name="sect2.2.3.1">2.2.3.1 GUIE/MAX-PAIR used as &quot;no limit to expand&quot;</a></h5><p>If we do not want to limit the object's ability to expand, we can set the MAX-SIZE of the object to GUIE/MAX-PAIR value, which is large enough to not limit the object's ability to expand.</p><h5><a id="sect2.2.3.2" name="sect2.2.3.2">2.2.3.2 Notes</a></h5><ul><li>The initial size is the size that is suggested as the size when the object is first displayed. Due to the dynamic nature of resizing, the actual dimensions of the object may differ.<ul><li>For example, if the object is in a vpanel, and the column width of the vpanel is larger than the suggested initial size, the resizing algorithm automatically tries to magnify the object so that its width becomes as large as the column width if possible.</li></ul><ul><li>Another reason, why the object size might differ from its INIT-SIZE may be that the object dimensions are clipped to either its MIN-SIZE, or MAX-SIZE</li></ul></li><li>There is not much sense (although it is not forbidden) to having the initial size equal to zero, since the object with zero initial size is invisible, and it cannot be enlarged to a nonzero size.</li><li>To specify that an object has a fixed size it suffices to specify that its minimal as well as maximal sizes are equal to its initial size.</li></ul><h4><a id="sect2.2.4" name="sect2.2.4">2.2.4 Hints are used to specify the dimensions of layouts</a></h4><p>To specify the way, how the dimensions of layouts, layout rows and columns are calculated, it is possible to use hints.</p><h4><a id="sect2.2.5" name="sect2.2.5">2.2.5 Box model is used to specify margins, etc.</a></h4><p>Every graphic object has a content area and optional surrounding padding, border, and margin areas.</p><h4><a id="sect2.2.6" name="sect2.2.6">2.2.6 Object visibility can be specified</a></h4><p>For every object in a layout it is possible to specify that the object is:</p><ul><li>VISIBLE, meaning that the object is:<ul><li>visible,</li></ul><ul><li>and it normally resizes with the layout</li></ul></li><li>HIDDEN, meaning that the object is<ul><li>invisible,</li></ul><ul><li>and it normally resizes with the layout reserving the necessary empty space</li></ul></li><li>FIXED, meaning that the objects is:<ul><li>visible,</li></ul><ul><li>and it does not resize with the layout,</li></ul><ul><ul><li>i.e. it changes neither its size,</li></ul></li></ul><ul><ul><li>nor its position, when the layout resizes</li></ul></li></ul></li><li>IGNORED, meaning that the objects is:<ul><li>invisible,</li></ul><ul><li>and it does not take up any space in the layout</li></ul></li></ul><div class="top">[ <a href="#top">back to top</a> ]</div><hr /><h2><a id="sect3" name="sect3">3. Hints</a></h2><p>In a hpanel, vpanel, hgroup, or vgroup the initial, minimal, and maximal sizes are computed using the dimensions of the graphic elements the layout contains and the hints user has given.</p><h3><a id="sect3.1" name="sect3.1">3.1 INIT-HINT, MIN-HINT and MAX-HINT</a></h3><p>These attributes are the hints used to calculate the layout dimensions, the INIT-HINT is used to calculate the INIT-SIZE, the MIN-HINT is used to calculate the MIN-SIZE, and the MAX-HINT is used to calculate the MAX-SIZE.</p><h3><a id="sect3.2" name="sect3.2">3.2 The 'AUTO hint value</a></h3><p>Since the contents of a layout can be examined, it is possible to calculate the INIT-SIZE, MIN-SIZE and MAX-SIZE values for a layout based on its contents.</p><p>For example, if we set the INIT-HINT layout attribute to 'AUTO, we are suggesting that the INIT-SIZE of the layout shall be calculated automatically, from the dimensions of the layout contents.</p><p>This is the default value, i.e., if not specified otherwise by the user, the layout dimensions will be calculated automatically from dimensions of the layout contents.</p><h3><a id="sect3.3" name="sect3.3">3.3 The 'INIT hint value</a></h3><p>For the MAX-SIZE and MIN-SIZE, the default hint is the 'AUTO hint as well, i.e. the values are calculated automatically from the contents of the layout.</p><p>When calculating the MIN-SIZE, the 'INIT hint can be used, if the user does not want the layout to become smaller than its INIT-SIZE is.</p><p>Similarly, when calculating the MAX-SIZE, the 'INIT hint can be used, if the user does not want the layout to become larger than its INIT-SIZE is.</p><h4><a id="sect3.3.1" name="sect3.3.1">3.3.1 Example of a non-resizing layout</a></h4><p>To specify that the layout does not resize at all, it is sufficient to use the 'INIT hint both for the layout MIN and MAX sizes. This way, the layout size cannot change.</p><h3><a id="sect3.4" name="sect3.4">3.4 The 'KEEP hint value</a></h3><p>When used e.g. as the MAX-HINT, this value specifies that the MAX-SIZE of the layout should be kept as it is now, i.e. not recalculated.</p><h3><a id="sect3.5" name="sect3.5">3.5 Hint values can be specified for every coordinate</a></h3><p>For every coordinate it is possible to specify a separate hint. For example, the INIT-HINT = 100x200 value specifies that the INIT-SIZE of the layout should always be 100x200. Another way, how to specify the same is to set the INIT-HINT to [100 200]. In the latter case, any of the numbers can be replaced by one of the above word hints.</p><div class="top">[ <a href="#top">back to top</a> ]</div><hr /><h2><a id="sect4" name="sect4">4. Styles and resizing</a></h2><p>Every style can have its own resizing. Currently, there are three resizing methods available:</p><ol><li>the simplest resizing method is the method adjusting the size of the object respecting the box model properties of the graphic object</li><li>the method used in the hpanel and vpanel styles adjusts the positions of subobjects so that they are organized into both rows and columns</li><li>the resizing method defined for the hgroup and vgroup styles uses a layout, in which the subobjects are organized into either rows, or columns, but not both at the same time</li></ol><h3><a id="sect4.1" name="sect4.1">4.1 Hpanel and vpanel</a></h3><p>In a hpanel or vpanel, the graphic objects are arranged into both rows and columns at the same time. As opposed to the group layout, layout resize always respects both rows as well as columns, producing a &quot;perfectly tabular&quot; layout.</p><h4><a id="sect4.1.1" name="sect4.1.1">4.1.1 LAYOUT-MODE</a></h4><p>Similarly as for hgroup/vgroup, the hpanel and vpanel differ by their LAYOUT-MODE attribute, which can be changed at run time. This attribute is the main difference between a hpanel and vpanel.</p><p>When the LAYOUT-MODE is set to HORIZONTAL (for hpanel), the primary orientation is left-to-right, rows are layed out in top-down manner; when the LAYOUT-MODE is set to VERTICAL (for hpanel), the primary orientation is top-down, columns are layed in left-to-right manner.</p><p>The LAYOUT-MODE can be changed at run-time, changing effectively a hpanel to vpanel or vice versa.</p><h4><a id="sect4.1.2" name="sect4.1.2">4.1.2 Row and column resizing</a></h4><p>Initial, minimal and maximal sizes of all rows and columns are computed from initial, minimal and maximal sizes of their graphic elements.</p><h4><a id="sect4.1.3" name="sect4.1.3">4.1.3 Hints</a></h4><p>Similarly as for layouts, the init, min, and max sizes of rows and columns are calculated using hints. The hints used are ROW-INIT - used to calculate the init height of row, ROW-MIN - used to calculate the min height of row, ROW-MAX - used to calculate the max height of a row, COLUMN-INIT - used to calculate the init width of a column, COLUMN-MIN used to calculate the min width of a column, and COLUMN-MAX - used to calculate the max width of a column.</p><h4><a id="sect4.1.4" name="sect4.1.4">4.1.4 The 'MAX hint value</a></h4><p>When used as the value of the ROW-INIT hint, it suggests that all initial heights shall be calculated as the maxima of the initial heights of their contents.</p><h4><a id="sect4.1.5" name="sect4.1.5">4.1.5 The 'MIN hint value</a></h4><p>When used as the value of the ROW-MAX hint, it suggests that all the max heights of the rows shall be calculated as the minima of the max heights of their contents.</p><h4><a id="sect4.1.6" name="sect4.1.6">4.1.6 The 'KEEP hint value</a></h4><p>When used as the value of the ROW-MIN hint, it suggests that all the min heights of the rows shall be kept &quot;as is&quot;.</p><h4><a id="sect4.1.7" name="sect4.1.7">4.1.7 A number used as a hint value</a></h4><p>When a number such as 100 is used as the COLUMN-INIT hint, it suggests that the initial widths of all columns shall be set to 100.</p><h4><a id="sect4.1.8" name="sect4.1.8">4.1.8 A block used as a hint value</a></h4><p>It is possible to specify a hint for every column individually, by specifying a block containing one of the above hints for every layout column. (or row)</p><h4><a id="sect4.1.9" name="sect4.1.9">4.1.9 Size</a></h4><ul><li>When a layout is resized, its rows as well as its columns are resized proportionally, i.e. so that their new dimensions have the same ratios as their initial sizes.</li><li>If, using the above rule, the size of a row/column would exceed its maximum, the respective row/column is magnified to its maximal size, and the &quot;unused magnification&quot; is used by other rows/columns proportionally.</li><li>If, using the above rule, the size of a row/column would become smaller than its minimum, the row/column is minified to its minimal size, and the &quot;unused minification&quot; is used by other rows/columns proportionally.</li></ul><h4><a id="sect4.1.10" name="sect4.1.10">4.1.10 Positions of graphic objects</a></h4><p>For every object, the resizing function computes the &quot;layout cell&quot; that contains it, which is an intersection of object's row with object's column. In the &quot;layout cell&quot;, the horizontal position of the object is chosen in accordance with object's ALIGN attribute, the vertical position is chosen in accordance with object's VALIGN attribute.</p><h4><a id="sect4.1.11" name="sect4.1.11">4.1.11 Position of the pane</a></h4><p>Respecting the PANE-ALIGN and PANE-VALIGN attributes, the whole &quot;tabular layout&quot; is positioned in the layout viewport. For example, if the PANE-ALIGN is left and PANE-VALIGN is top, the top left point of the layout is positioned to the top left point of the layout viewport, similarly for other cases.</p><h3><a id="sect4.2" name="sect4.2">4.2 Hgroup and vgroup styles </a></h3><h4><a id="sect4.2.1" name="sect4.2.1">4.2.1 LAYOUT-MODE</a></h4><p>In a group, the graphic objects are primarily arranged depending on its LAYOUT-MODE attribute. The LAYOUT-MODE attribute can have two possible values: HORIZONTAL and VERTICAL.</p><p>If the LAYOUT-MODE is HORIZONTAL, the graphic object in the hgroup are arranged into rows in a left to right manner. Rows are positioned in a top-down manner.</p><p>If the LAYOUT-MODE is VERTICAL, the graphic object in the vgroup are arranged into columns in a top to down manner. Columns are positioned in a left-to-right manner.</p><p>By changing the LAYOUT-MODE of a hgroup/vgroup it is possible to change the way how the subobjects are arranged, which actually transforms a hgroup into a vgroup and vice versa.</p><h4><a id="sect4.2.2" name="sect4.2.2">4.2.2 Longitudinal positions of graphic objects</a></h4><p>Every graphic object in a row (or column, depending on the LAYOUT-MODE) is supposed to lay next to another, so, if we eventually want to have a &quot;gap&quot; between two subsequent graphic objects, we may need to insert a &quot;filler object&quot; &quot;occupying&quot; the &quot;empty space&quot; between the objects.</p><p>The resizing algorithm works so that for a pair of graphic objects laying next to each other holds that they will remain to lay next to each other after any resizing operation.</p><h4><a id="sect4.2.3" name="sect4.2.3">4.2.3 Transverzal positions of graphic objects</a></h4><p>If the LAYOUT-MODE is HORIZONTAL, the height of a row is the maximum of the heights of all graphic objects in the row.</p><p>Analogically, if the LAYOUT-MODE is VERTICAL, the width of a column is the maximum of the widths of all graphic objects in the column.</p><p>If the LAYOUT-MODE is HORIZONTAL, the height of a row can be adjusted by inserting a &quot;flexible&quot; graphic object into the row (which may even be invisible), allowing the row to grow more, than &quot;ordinary graphic objects&quot; would allow. This suggestion works analogically columns, if the LAYOUT-MODE is VERTICAL.</p><p>To compute the transverzal position of a graphic object, its alignment attributes are taken into account.</p><p>If the LAYOUT-MODE is HORIZONTAL, the the VALIGN attribute is used to align the object relative to its row as follows:</p><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>top</strong></td><td class="defexplain"><p>the top edge of the graphic object is aligned to the top edge of the row</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>middle</strong></td><td class="defexplain"><p>the vertical center of the graphic object is aligned to the vertical center of the row</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>bottom</strong></td><td class="defexplain"><p>the bottom edge of the graphic object is aligned to the bottom edge of the row</p></td></tr></table></div><p>If the LAYOUT-MODE is VERTICAL, the the ALIGN attribute is used to align the object relative to its column as follows:</p><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>left</strong></td><td class="defexplain"><p>the left edge of the graphic object is aligned to the left edge of the column</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>center</strong></td><td class="defexplain"><p>the horizontal center of the graphic object is aligned to the horizontal center of the column</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>right</strong></td><td class="defexplain"><p>the right edge of the graphic object is aligned to the right edge of the column</p></td></tr></table></div><h4><a id="sect4.2.4" name="sect4.2.4">4.2.4 Longitudinal positions of rows/columns</a></h4><p>If the LAYOUT-MODE is HORIZONTAL, the row ALIGN attribute specifies the horizontal alignment of the row relative to the group viewport. Three alignment alternatives are available:</p><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>left</strong></td><td class="defexplain"><p>the left edge of the row (i.e. the left edge of the first graphic object in the row) is aligned to the left edge of the group viewport</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>center</strong></td><td class="defexplain"><p>the horizontal center of the row is aligned to the horizontal center of the group viewport</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>right</strong></td><td class="defexplain"><p>the right edge of the row (i.e. the right edge of the last graphic object in the row) is aligned to the right edge of the group viewport</p></td></tr></table></div><p>If the LAYOUT-MODE is HORIZONTAL, the PANE-ALIGN attribute is used to set the ALIGN attributes of all rows in the group. In case the PANE-ALIGN attribute is a word, all group rows get the same ALIGN attribute as specified by PANE-ALIGN. If the PANE-ALIGN attribute is a block, every row obtains its own ALIGN attribute from the PANE-ALIGN block.</p><p>If the LAYOUT-MODE is VERTICAL, the VALIGN attribute specifies the vertical alignment of the column relative to the group viewport. Three alignment alternatives are available:</p><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>top</strong></td><td class="defexplain"><p>the top edge of the first column (i.e. the top edge of the first graphic object in the column) is aligned to the top edge of the layout viewport</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>middle</strong></td><td class="defexplain"><p>the vertical center of the column is aligned to the vertical center of the layout viewport</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>bottom</strong></td><td class="defexplain"><p>the bottom edge of the column (i.e. the bottom edge of the last graphic element in the column) is aligned to the bottom edge of the layout viewport</p></td></tr></table></div><p>If the LAYOUT-MODE is VERTICAL, the PANE-VALIGN attribute is used to set the VALIGN attributes of all columns in the group. In case the PANE-VALIGN attribute is a word, all group columns get the same VALIGN attribute as specified by PANE-VALIGN. If the PANE-VALIGN attribute is a block, every column obtains its own VALIGN attribute from the PANE-VALIGN block.</p><h4><a id="sect4.2.5" name="sect4.2.5">4.2.5 Transversal positions of rows/columns</a></h4><p>The resizing algorithm is working so that if two rows/columns lay next to each other, they will remain to lay next to each other (without any gap) after any resizing operation.</p><p>To specify the vertical position of all group rows, three alignment alternatives using the PANE-VALIGN attribute of the group are available:</p><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>top</strong></td><td class="defexplain"><p>the top edge of the first row is aligned to the top edge of the group viewport</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>middle</strong></td><td class="defexplain"><p>the vertical center of the central row is aligned to the vertical center of the group viewport</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>bottom</strong></td><td class="defexplain"><p>the bottom edge of the last row is aligned to the bottom edge of the group viewport</p></td></tr></table></div><p>To specify the horizontal position of all group columns, three alignment alternatives using the PANE-ALIGN attribute of the group are available:</p><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>left</strong></td><td class="defexplain"><p>the left edge of the first column is aligned to the left edge of the layout viewport</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>center</strong></td><td class="defexplain"><p>the horizontal center of the central column is aligned to the horizontal center of the layout viewport</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>right</strong></td><td class="defexplain"><p>the right edge of the last column is aligned to the right edge of the layout viewport</p></td></tr></table></div><h4><a id="sect4.2.6" name="sect4.2.6">4.2.6 Size</a></h4><ul><li>When a group is resized, the graphic objects it contains are resized proportionally, i.e., so that their new dimensions have the same ratios as their initial sizes.</li><li>If, using the above rule, the size of a graphic object would exceed its maximum, the object is magnified to its maximal size, and the &quot;unused magnification&quot; is used by other graphic objects proportionally.</li><li>If, using the above rule, the size of a graphic object would become smaller than its minimum, the object is minified to its minimal size, and the &quot;unused minification&quot; is used by other graphic objects proportionally.</li></ul><h4><a id="sect4.2.7" name="sect4.2.7">4.2.7 Hints</a></h4><p>Similarly as for (h/v)panels, it is possible to specify hints for group lines. The hints used are: LINE-INIT - used to calculate the initial transversal dimensions of lines, LINE-MIN - used to calculate the minimal transversal dimensions of lines, LINE-MAX - used to calculate the maximal transversal dimensions of line.</p><p>The same types of hint values as for layout rows/columns are available.</p><div class="top">[ <a href="#top">back to top</a> ]</div><hr /><h2><a id="sect5" name="sect5">5. Box model</a></h2><p>The box model used is similar to the well known CSS box model. Every GOB has a viewport(content) area and optional surrounding padding, border, and margin areas.</p><p><img alt="./boxmodel.gif" src="./boxmodel.gif"/></p><p>The margin, border, and padding can be broken down into top, right, bottom, and left segments.</p><p>The perimeter of each of the four areas (viewport, padding, border, and margin) is called an &quot;edge&quot;, so each box has four edges:</p><p><strong>viewport edge</strong></p><p>The viewport edge surrounds the viewport area of GOB. The four viewport edges define the GOB's viewport box.</p><p><strong>padding edge</strong></p><p>The padding edge surrounds the GOB padding. If the padding has 0 width, the padding edge is the same as the viewport edge. The four padding edges define the GOB's padding box.</p><p><strong>border edge</strong></p><p>The border edge surrounds the GOB border. If the border has 0 width, the border edge is the same as the padding edge. The four border edges define the GOB's border box.</p><p><strong>margin edge</strong></p><p>The margin edge surrounds the GOB margin. If the margin has 0 width, the margin edge is the same as the border edge. The four margin edges define the GOB's margin box.</p><div class="note"><div class="message"><p>NOTE: The margin area has a transparent background, so it reveals the content under the GOB, while the background of the padding area is of the same color as the background of the GOB.</p></div></div><p>Each edge may be broken down into a top, right, bottom, and left edge. The offset/size values for each edge have to be specified in pixel units.</p><p><strong>GOB 'viewport' area size</strong></p><p>The dimensions of the viewport area of a GOB can be affected by the settings of all edges. The final width and height of the GOB is always equal to the defined size of the gob.</p><p>The following equation is always true:</p><pre class="example">viewport-size = gob-size - margin-top-left - border-top-left - padding-top-left -
               margin-bottom-right - border-bottom-right - padding-bottom-right</pre><p>For example GOB of size 100x100 pixels with border of 1 pixel on all edges will have viewport area of size 98x98 pixels.</p><div class="top">[ <a href="#top">back to top</a> ]</div><hr /><h2><a id="sect6" name="sect6">6. Additional GOB attributes</a></h2><p>The resizing system needs to define a couple of additional atributes(accessible thru FACETS object) for each GOB to be able to work properly.</p><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>align</strong></td><td class="defexplain"><p>holds a word describing how the graphic object is aligned horizontally in its column</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>valign</strong></td><td class="defexplain"><p>holds a word describing how the graphic object is aligned vertically in its row</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>init-size</strong></td><td class="defexplain"><p>holds the initial size (given as size, when the GOB is created) of the GOB (default is 100x100)</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>min-size</strong></td><td class="defexplain"><p>defines minimum GOB size value boundary that will be used during resizing (default is 0x0, which means the same as &quot;no limit&quot;)</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>max-size</strong></td><td class="defexplain"><p>defines maximum GOB size value boundary that will be used during resizing (default is guie/max-pair constant, which means the same, as &quot;no limit&quot;)</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>resizes</strong></td><td class="defexplain"><p>flags if the face is handled by resizing system (default is TRUE)</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>border-color</strong></td><td class="defexplain"><p>defines the color of the GOB border (default is NONE which means the border color is turned off)</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>border-size</strong></td><td class="defexplain"><p>defines the size(s) of the GOB border (default is [0x0 0x0])</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>margin</strong></td><td class="defexplain"><p>defines the margin offset(s) of the GOB (default is [0x0 0x0])</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>padding</strong></td><td class="defexplain"><p>defines the padding offset(s) of the GOB (default is [0x0 0x0])</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>bg-color</strong></td><td class="defexplain"><p>defines the color of the GOB 'viewport' background (default is NONE which means the background color is turned off)</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>space</strong></td><td class="defexplain"><p>read-only value, holds sum of margin, padding and border sizes of the GOB (default is [0x0 0x0] used internally for box model calculations)</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>margin-box</strong></td><td class="defexplain"><p>read-only value, a block! containing top-left, top-right, bottom-left, bottom-right and center pair!s coordinates describing the margin area of the GOB</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>border-box</strong></td><td class="defexplain"><p>read-only value, a block! containing top-left, top-right, bottom-left, bottom-right and center pair!s coordinates describing the border area of the GOB
</p></td></tr><tr><td class="defword"><strong>padding-box</strong></td><td class="defexplain"><p>read-only value, a block! containing top-left, top-right, bottom-left, bottom-right and center pair!s coordinates describing the padding area of the GOB</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>viewport-box</strong></td><td class="defexplain"><p>read-only value, a block! containing top-left, top-right, bottom-left, bottom-right and center pair!s coordinates describing the viewport area of the GOB</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>gob</strong></td><td class="defexplain"><p>read-only value, reference to GOB object (can be used in DRAW block defeinition of a face)</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>gob-size</strong></td><td class="defexplain"><p>can be set in layout OPTIONS block if the face is displayed in FIXED mode, otherwise used internally by the resizing system, don't use it.</p></td></tr></table></div><h3><a id="sect6.1" name="sect6.1">6.1 Special atributes shared by layout(panel,group) faces</a></h3><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>layout-mode</strong></td><td class="defexplain"><p>specifies whether the graphic objects are preferably laid in rows or in columns; if this value is changed, it is necessary to call the UPDATE-FACE function, since some low-level values need to be recalculated</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>spacing</strong></td><td class="defexplain"><p>the X coordinate specifies space between columns and the Y coordinate space between rows</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>min-hint</strong></td><td class="defexplain"><p>used to calculate the MIN-SIZE</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>max-hint</strong></td><td class="defexplain"><p>used to calculate the MAX-SIZE</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>init-hint</strong></td><td class="defexplain"><p>used to calculate the INIT-SIZE</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>min-size</strong></td><td class="defexplain"><p>read only value, defines minimum GOB size value boundary that will be used during resizing</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>max-size</strong></td><td class="defexplain"><p>read only value, defines maximum GOB size value boundary that will be used during resizing</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>init-size</strong></td><td class="defexplain"><p>read only value, defines the initial size of GOB</p></td></tr></table></div><h3><a id="sect6.2" name="sect6.2">6.2 Special group face attributes</a></h3><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>pane-align</strong></td><td class="defexplain"><p>specifies the horizontal alignment of group columns, can be changed</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>pane-valign</strong></td><td class="defexplain"><p>specifies the vertical alignment of group rows, can be changed</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>line-min</strong></td><td class="defexplain"><p>used to calculate the minimal transversal dimensions of line</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>line-max</strong></td><td class="defexplain"><p>used to calculate the maximal transversal dimensions of line</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>line-init</strong></td><td class="defexplain"><p>used to calculate the initial transversal dimensions of line</p></td></tr></table></div><h3><a id="sect6.3" name="sect6.3">6.3 Special layout face attributes</a></h3><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>break-after</strong></td><td class="defexplain"><p>specifies the count of columns in a vpanel, or the count of rows in a hpanel; can be changed manually, negative values are not allowed</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>pane-align</strong></td><td class="defexplain"><p>specifies the horizontal alignment of the layout relative to the layout viewport, can be changed manually</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>pane-valign</strong></td><td class="defexplain"><p>specifies the vertical alignment of the layout relative to the layout viewport, can be changed manually</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>row-min</strong></td><td class="defexplain"><p>used to calculate the min height of a row</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>row-max</strong></td><td class="defexplain"><p>used to calculate the max height of a row</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>row-init</strong></td><td class="defexplain"><p>used to calculate the init height of a row</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>column-min</strong></td><td class="defexplain"><p>used to calculate the min width of a column</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>column-max</strong></td><td class="defexplain"><p>used to calculate the max width of a column</p></td></tr></table></div><div class="deftablepara"><table class="deftable"><tr><td class="defword"><strong>column-init</strong></td><td class="defexplain"><p>used to calculate the init width of a column</p></td></tr></table></div><h3><a id="sect6.4" name="sect6.4">6.4 Attribute formats and units</a></h3><p>This section will describe data formats used by specific attributes.</p><h4><a id="sect6.4.1" name="sect6.4.1">6.4.1 LAYOUT-MODE</a></h4><div><table class="stdtable" border="0" cellpadding="0" cellspacing="1"><tr><td>format</td><td>description</td></tr><tr><td>word!</td><td>layout mode, variants are: HORIZONTAL VERTICAL</td></tr></table></div><h4><a id="sect6.4.2" name="sect6.4.2">6.4.2 ALIGN</a></h4><div><table class="stdtable" border="0" cellpadding="0" cellspacing="1"><tr><td>format</td><td>description</td></tr><tr><td>word!</td><td>horizontal alignment, variants are: LEFT CENTER RIGHT</td></tr></table></div><h4><a id="sect6.4.3" name="sect6.4.3">6.4.3 PANE-ALIGN</a></h4><div><table class="stdtable" border="0" cellpadding="0" cellspacing="1"><tr><td>format</td><td>description</td></tr><tr><td>word! or block!</td><td>horizontal alignment, variants are: left center right</td></tr></table></div><h4><a id="sect6.4.4" name="sect6.4.4">6.4.4 VALIGN</a></h4><div><table class="stdtable" border="0" cellpadding="0" cellspacing="1"><tr><td>format</td><td>description</td></tr><tr><td>word!</td><td>vertical alignment, variants are: TOP MIDDLE BOTTOM</td></tr></table></div><h4><a id="sect6.4.5" name="sect6.4.5">6.4.5 PANE-VALIGN</a></h4><div><table class="stdtable" border="0" cellpadding="0" cellspacing="1"><tr><td>format</td><td>description</td></tr><tr><td>word! or block!</td><td>vertical alignment, variants are: TOP MIDDLE BOTTOM</td></tr></table></div><h4><a id="sect6.4.6" name="sect6.4.6">6.4.6 SIZE, INIT-SIZE, MIN-SIZE, MAX-SIZE</a></h4><div><table class="stdtable" border="0" cellpadding="0" cellspacing="1"><tr><td>format</td><td>description</td></tr><tr><td>pair!</td><td>size as a pair, in pixels</td></tr></table></div><h4><a id="sect6.4.7" name="sect6.4.7">6.4.7 BREAK-AFTER</a></h4><div><table class="stdtable" border="0" cellpadding="0" cellspacing="1"><tr><td>format</td><td>description</td></tr><tr><td>integer! (positive)</td><td>The column count in a hpanel, or the row count in a vpanel</td></tr></table></div><h4><a id="sect6.4.8" name="sect6.4.8">6.4.8 BORDER-COLOR</a></h4><div><table class="stdtable" border="0" cellpadding="0" cellspacing="1"><tr><td>format</td><td>description</td></tr><tr><td>tuple!</td><td>color of the border defined as a rebol tuple</td></tr></table></div><h4><a id="sect6.4.9" name="sect6.4.9">6.4.9 BORDER-SIZE, MARGIN, PADDING</a></h4><div><table class="stdtable" border="0" cellpadding="0" cellspacing="1"><tr><td>format</td><td>description</td></tr><tr><td>integer!</td><td>all edges will have the same integer value, in pixels</td></tr><tr><td>pair!</td><td>top/bottom and left/right edge pairs will have the same value, in pixels</td></tr><tr><td>[pair!]</td><td>only the top/left edges are set, in pixels</td></tr><tr><td>[pair! pair!]</td><td>every edge is defined separately, in pixels</td></tr></table></div><h4><a id="sect6.4.10" name="sect6.4.10">6.4.10 DRAW</a></h4><div><table class="stdtable" border="0" cellpadding="0" cellspacing="1"><tr><td>format</td><td>description</td></tr><tr><td>block!</td><td>valid DRAW dialect block</td></tr></table></div><h4><a id="sect6.4.11" name="sect6.4.11">6.4.11 SPACE</a></h4><div><table class="stdtable" border="0" cellpadding="0" cellspacing="1"><tr><td>format</td><td>description</td></tr><tr><td>[pair! pair!]</td><td>first pair is left/top, second right/bottom value, in pixels</td></tr></table></div><div class="top">[ <a href="#top">back to top</a> ]</div><hr /><h2><a id="sect7" name="sect7">7. The UPDATE-FACE function</a></h2><p>When a face was updated by changing its dimensions, or otherwise affecting its appearance/handling by its parent layout, the UPDATE-FACE function should be called to &quot;signal&quot; that event to its parent.</p><pre class="example">update-face: funct [
    face [object!]
    /no-show
    /contents
    /contents-only
]</pre><p>When called with the /NO-SHOW refinement, the function just sets the respective flags for the layout resizing algorithm to be able to update the layout.</p><div class="top">[ <a href="#top">back to top</a> ]</div><hr /><p class="end">Document formatter copyright <a href="http://www.robertmuench.de">Robert M. M&uuml;nch</a>. All Rights Reserved.<br />XHTML 1.0 Transitional formatted with Make-Doc-Pro Version:1.3.0 on 13-Jan-2013 at 15:54:47</p></body></html>