<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">@media screen { h1,h2,h3,h4,h5,p,a,br,li,td, .underline {font-family:Arial, Helvetica, sans-serif;text-align:justify} body {font-size:11pt;line-height:1.3em} h1 {font-size:18pt} h2 {font-size:15pt} h3 {font-size:13pt} h4 {font-size:12pt} h5 {font-size:11pt} hr {text-align:center;height:1px;border:none;background:black} ol,ul,p,table {margin-left:3em;margin-right:3em} a {text-decoration:none} a:hover {text-decoration:underline} img {} .defword {width:25%} .defexplain {} .defexplain p {padding:0em;margin:0em} .deftablepara {} .deftable {width:85%;padding-left:1em;border-style:none;vertical-align:top} .deftable td {text-align:left;vertical-align:top} .deftablefaq {border-style:solid;border-width:thin} .stdtable {border:1px solid;background:black} .stdtable th {padding:0.5em;background:#EEEEEE;font-family:Arial, Helvetica, sans-serif;font-weight:bold;text-align:center} .stdtable td {padding:0.5em;background:white;text-align:left;vertical-align:top} .end {font-size:8pt} .example {margin-left:3em;margin-right:3em;border:1px solid;padding:1em;background-color:#EEEEEE} .header {margin-left:3em;margin-right:3em;border:1px solid;padding:1em;background-color:#FFFFEE} .indented {margin-left: 50px} .litable {text-align:left} .new {border-right:10px solid;padding-right:10px;font-family:Arial} .note {margin:0.5em 3em 0.5em 3em;border:1px solid;padding:0em;background-color:#F0F0A0} .note .title {font-family:sans-serif;font-weight:bold;margin:0.5em} .note .message {margin:0.5em 1.5em 0.5em 1.5em;padding:0em} .note .message p {padding:0em;margin:1em 0em 1em 0em} .reference {} .caption {font-size:10pt;text-align:center;font-style:italic} .todolist {padding:0.5em;font-size:10pt} .todolist p {margin:0em 3em 0em 3em} .todo {margin:1em 3em 1em 3em;padding:0.5em;border:solid 2px black;background:#FFAAAA;font-size:10pt} .todo p {margin:0.2em 1em 0.2em 1em} .inline {margin:0.5em 3em 0.5em 3em;border:solid 1px;padding:0em;background-color:#EEEEEE} .inline .title {font-family:sans-serif;font-weight:bold;margin:0.5em} .inline .elements {font-size:10pt;margin:0em 0em 0.5em 0em;padding:0em 1em 0em 1em} .inline .elements p {display:inline-table;margin:0.25em 0.5em 0.25em 0.5em} .tocindent {margin-left: 2em} .top {font-size:8pt;text-align:right} .underline {text-decoration:underline} } @media print { h1,h2,h3,h4,h5,p,a,br,li, #underline {font-family:Arial;text-align:justify;orphans:5;widows:5} p,li,td {font-size:10pt} ul,ol {page-break-after:avoid;orphans:5;widows:5} }</style><title>Resizing for R3 GUI framework, low-level documentation</title></head><body onload="window.location.hash = window.location.hash"><a id="top" name="top"></a><h2>Resizing for R3 GUI framework, low-level documentation</h2><pre class="example">Author: Ladislav Mecir
Date: 1-Feb-2011/14:41:19+1:00</pre><hr /><h2>Contents</h2><div class="tocindent"><a href="#sect1"><strong>1. Purpose</strong></a><br /><a href="#sect2"><strong>2. Alignment attribute</strong></a><br /><a href="#sect3"><strong>3. Datastructures</strong></a><br /><div class="tocindent"><a href="#sect3.1"><strong>3.1 The hgroup/vgroup layouts</strong></a><br /><div class="tocindent"><a href="#sect3.1.1">3.1.1 Line objects</a><br /></div><a href="#sect3.2"><strong>3.2 The hpanel and vpanel layouts</strong></a><br /></div><a href="#sect4"><strong>4. Low level functions</strong></a><br /><div class="tocindent"><a href="#sect4.1"><strong>4.1 REMOVE-FROM-GROUP</strong></a><br /><a href="#sect4.2"><strong>4.2 INSERT-INTO-GROUP</strong></a><br /><a href="#sect4.3"><strong>4.3 CHANGE-LINE-ALIGNMENT</strong></a><br /><a href="#sect4.4"><strong>4.4 RESIZE-GROUP</strong></a><br /><a href="#sect4.5"><strong>4.5 RESIZE-PANEL</strong></a><br /></div></div><h2><a id="sect1" name="sect1">1. Purpose</a></h2><p>This document describes the implementation details of the R3 GUI resizing replacement subsystem.</p><div class="top">[ <a href="#top">back to top</a> ]</div><hr /><h2><a id="sect2" name="sect2">2. Alignment attribute</a></h2><p>At the high level, a graphic object, row, or a set of rows can be aligned vertically using one of the top middle bottom options, or vertically using one of the left center right options.</p><p>For example, a graphic element inserted into a row in a group can be aligned to the top of the row, to the middle of the row, or to the bottom of the row. On the other hand, the same element inserted into a column in a layout can be aligned to the left side of the column, to the center of the column, or to the right side of the column.</p><p>To be able to use a &quot;common value&quot; that can be used to align the element both in a row as well as in a column, we use the words top-left middle-center and bottom-right.</p><p>If a graphic element uses e.g. a top-left alignment, then it is positioned at the top of its row in a group, or at the left side of its column in a layout. Similarly for the other &quot;low level attribute values&quot;.</p><div class="top">[ <a href="#top">back to top</a> ]</div><hr /><h2><a id="sect3" name="sect3">3. Datastructures</a></h2><h3><a id="sect3.1" name="sect3.1">3.1 The hgroup/vgroup layouts</a></h3><p>In addition to the data described in the</p><p><a href="resizing.html">resizing.html</a></p><p>file, the hgroup/vgrop layouts contain the INTERN object having the following attributes:</p><div><table class="stdtable" border="0" cellpadding="0" cellspacing="1"><tr><td>Variable</td><td>Type</td><td>Description</td></tr><tr><td>init-pane</td><td>pair!</td><td>holds the initial pane size, in pixels</td></tr><tr><td>lines</td><td>block! containing line objects</td><td>Describes how the graphic elements are organized into lines</td></tr><tr><td>minification-index</td><td>block! containing integers</td><td>Line indices ordered so, that the &quot;hardest to minify&quot; line comes first</td></tr><tr><td>magnification-index</td><td>block! containing integers</td><td>Line indices ordered so, that the &quot;hardest to magnify&quot; line comes first</td></tr></table></div><h4><a id="sect3.1.1" name="sect3.1.1">3.1.1 Line objects</a></h4><p>The rows(in a group)/columns(in a layout) block must contain non-empty rows/columns consisting of graphic elements, every row/column is a line object having:</p><div><table class="stdtable" border="0" cellpadding="0" cellspacing="1"><tr><td>Variable</td><td>Type</td><td>Description</td></tr><tr><td>start</td><td>integer!</td><td>Index of the first element in the line</td></tr><tr><td>length</td><td>integer!</td><td>How many elements the line contains</td></tr><tr><td>init-size</td><td>pair!</td><td>The initial dimensions of the line, in pixels</td></tr><tr><td>min-size</td><td>pair!</td><td>The minimal size the line can have, in pixels</td></tr><tr><td>max-size</td><td>pair!</td><td>The maximal size the line can have, in pixels</td></tr><tr><td>offset</td><td>integer!</td><td>The offset of the line (only one coordinate makes sense), in pixels</td></tr><tr><td>size</td><td>pair!</td><td>The size of the line, in pixels</td></tr><tr><td>align</td><td>word!</td><td>The horizontal alignment of the line, possible values are: left center right</td></tr><tr><td>valign</td><td>word!</td><td>The vertical alignment of the line, possible values are: top middle bottom</td></tr><tr><td>minification-index</td><td>block! containing integer! values</td><td>Element indices ordered so, that the &quot;hardest to minify&quot; element comes first</td></tr><tr><td>magnification-index</td><td>block! containing integer! values</td><td>Element indices ordered so, that the &quot;hardest to magnify&quot; element comes first</td></tr></table></div><p>Note: Depending on the LAYOUT-MODE, only one of the LINE/ALIGN LINE/VALIGN attributes is used.</p><h3><a id="sect3.2" name="sect3.2">3.2 The hpanel and vpanel layouts</a></h3><p>In addition to the data described in the</p><p><a href="resizing.html">resizing.html</a></p><p>file, the hpanel/vpanel layouts contain the INTERN object having the following attributes:</p><div><table class="stdtable" border="0" cellpadding="0" cellspacing="1"><tr><td>Variable</td><td>Type</td><td>Description</td></tr><tr><td>init-pane</td><td>pair!</td><td>holds the initial pane size, in pixels</td></tr><tr><td>init-heights</td><td>block! containing integer values</td><td>holds the initial heights of layout rows</td></tr><tr><td>min-heights</td><td>block! containing integer values</td><td>holds the minimal heights of layout rows</td></tr><tr><td>max-heights</td><td>block! containing integer values</td><td>holds the maximal heights of layout rows</td></tr><tr><td>init-widths</td><td>block! containing integer values</td><td>holds the initial widths of layout columns</td></tr><tr><td>min-widths</td><td>block! containing integer values</td><td>holds the minimal widths of layout columns</td></tr><tr><td>max-widths</td><td>block! containing integer values</td><td>holds the maximal widths of layout columns</td></tr><tr><td>row-minification-index</td><td>block! containing integers</td><td>Row indices ordered so, that the &quot;hardest to minify&quot; row comes first</td></tr><tr><td>row-magnification-index</td><td>block! containing integers</td><td>Row indices ordered so, that the &quot;hardest to magnify&quot; row comes first</td></tr><tr><td>column-minification-index</td><td>block! containing integers</td><td>Column indices ordered so, that the &quot;hardest to minify&quot; column comes first</td></tr><tr><td>column-magnification-index</td><td>block! containing integers</td><td>Column indices ordered so, that the &quot;hardest to magnify&quot; column comes first</td></tr></table></div><div class="top">[ <a href="#top">back to top</a> ]</div><hr /><h2><a id="sect4" name="sect4">4. Low level functions</a></h2><h3><a id="sect4.1" name="sect4.1">4.1 REMOVE-FROM-GROUP</a></h3><p>The REMOVE-FROM-GROUP's function purpose is to facilitate subgob removal from a group. In addition to removing the graphic elements it removes also the lines (rows or columns) that become empty. Other affected lines are adjusted to not contain the removed elements.</p><pre class="example">set 'remove-from-group funct [
    {remove subgob(s) from a group}
    group [gob!]
    index [integer!]
    length [integer!]
]</pre><h3><a id="sect4.2" name="sect4.2">4.2 INSERT-INTO-GROUP</a></h3><p>The INSERT-INTO-GROUP's function purpose is to facilitate subgob insertion into a group. In addition to inserting the graphic elements it also adds lines (rows or columns) into the layout. No line is allowed to become empty as a result of such insertion, though.</p><p>In addition to inserting graphic objects, it is also possible to insert the word <em>*return*</em>, which causes a line break, i.e. an insertion of a new line, breaking the affected line into two.</p><pre class="example">set 'insert-into-group funct [
    {insert faces(s) into a group}
    group [gob!]
    index [integer!]
    face [word! object! block!] {RETURN signals line break}
]</pre><h3><a id="sect4.3" name="sect4.3">4.3 CHANGE-LINE-ALIGNMENT</a></h3><p>The INSERT-INTO-GROUP function creates new lines using just the default alignment. This function is needed to adjust the alignment of the lines, if different alignment is required.</p><p>If the function is called using just a word, the alignment of all lines in the affected group is changed to this value. If a block is used, then the alignments are taken from the block.</p><p>If the length of the alignment block is greater than the line count of the affected group, the excess alignments are ignored. If the length of the alignment block is lesser the line count of the affected group, the excess lines remain unaffected.</p><pre class="example">set 'change-line-alignment funct [
    {changes line alignment for all lines in a group}
    group [gob!]
    align [word! block!]
    valign [word! block!]
]</pre><h3><a id="sect4.4" name="sect4.4">4.4 RESIZE-GROUP</a></h3><p>This is the function that actually resizes a vgroup/hgroup (changes the size, computes the new sizes and offsets of graphic elements, and calls their on-resize functions).</p><pre class="example">set 'resize-group funct [
    {resize a group}
    group [gob!]
]</pre><h3><a id="sect4.5" name="sect4.5">4.5 RESIZE-PANEL</a></h3><p>This is the function that actually resizes a hpanel/vpanel (changes the hpanel/vpanel size, computes the new sizes and offsets of graphic elements, and calls their on-resize functions).</p><pre class="example">set 'resize-panel funct [
    {resize a panel}
    panel [gob!]
]</pre><div class="top">[ <a href="#top">back to top</a> ]</div><hr /><p class="end">Document formatter copyright <a href="http://www.robertmuench.de">Robert M. M&uuml;nch</a>. All Rights Reserved.<br />XHTML 1.0 Transitional formatted with Make-Doc-Pro Version:1.3.0 on 28-Apr-2011 at 11:17:14</p></body></html>